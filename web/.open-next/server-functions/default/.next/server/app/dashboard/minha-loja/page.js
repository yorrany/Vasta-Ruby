(()=>{var e={};e.id=504,e.ids=[504],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},2636:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>o.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>n});var s=t(260),r=t(8203),l=t(5155),o=t.n(l),i=t(7292),d={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);t.d(a,d);let n=["",{children:["dashboard",{children:["minha-loja",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,3428)),"C:\\Vasta\\web\\app\\dashboard\\minha-loja\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,3748)),"C:\\Vasta\\web\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,8169)),"C:\\Vasta\\web\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,1129)),"C:\\Vasta\\web\\app\\not-found.tsx"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,9116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,1485,23)),"next/dist/client/components/unauthorized-error"]}],c=["C:\\Vasta\\web\\app\\dashboard\\minha-loja\\page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/dashboard/minha-loja/page",pathname:"/dashboard/minha-loja",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:n}})},5326:(e,a,t)=>{Promise.resolve().then(t.bind(t,3428))},3782:(e,a,t)=>{Promise.resolve().then(t.bind(t,7702))},7702:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>j});var s=t(5512),r=t(8009),l=t(6235),o=t(8741),i=t(1680);let d=(0,i.A)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]),n=(0,i.A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),c=(0,i.A)("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);var u=t(4559),x=t(8774),p=t(4269),m=t(488);let h=(0,i.A)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);var v=t(2353),b=t(1393),f=t(3680);function g({isOpen:e,onClose:a,productToEdit:t,onSuccess:o}){let[i,d]=(0,r.useState)(t?.title||""),[n,c]=(0,r.useState)(t?.description||""),[g,j]=(0,r.useState)(t?.price?.toString()||""),[y,N]=(0,r.useState)(t?.image_url||null),[w,k]=(0,r.useState)(!1),[A,z]=(0,r.useState)(!1),{user:C}=(0,x.A)(),P=(0,u.U)(),_=(0,r.useRef)(null),M=async e=>{let a=e.target.files?.[0];if(a&&C){if(a.size>5242880){alert("Imagem deve ter no m\xe1ximo 5MB");return}z(!0);try{let e=a.name.split(".").pop(),t=`${C.id}/products/${Date.now()}.${e}`,{error:s}=await P.storage.from("avatars").upload(t,a);if(s)throw s;let{data:{publicUrl:r}}=P.storage.from("avatars").getPublicUrl(t);N(r)}catch(e){console.error("Error uploading product image:",e),alert("Erro ao fazer upload da imagem.")}finally{z(!1)}}},q=async e=>{if(e.preventDefault(),!C)return;k(!0);let s=parseFloat(g.replace(",","."));try{let e={title:i,description:n,price:isNaN(s)?0:s,image_url:y,type:"digital",profile_id:C.id};if(t?.id){let{error:a}=await P.from("products").update(e).eq("id",t.id);if(a)throw a}else{let{error:a}=await P.from("products").insert(e);if(a)throw a}o(),a()}catch(e){console.error("Error saving product:",e),alert("Erro ao salvar produto.")}finally{k(!1)}};return e?(0,s.jsx)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm animate-in fade-in duration-200 p-4",children:(0,s.jsxs)("div",{className:"w-full max-w-lg bg-vasta-surface rounded-[2rem] border border-vasta-border shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center p-6 border-b border-vasta-border",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-vasta-text",children:t?"Editar Produto":"Novo Produto Digital"}),(0,s.jsx)("button",{onClick:a,className:"text-vasta-muted hover:text-vasta-text transition-colors p-2 hover:bg-vasta-surface-soft rounded-full",children:(0,s.jsx)(p.A,{size:20})})]}),(0,s.jsxs)("form",{onSubmit:q,className:"p-6 space-y-6 max-h-[80vh] overflow-y-auto custom-scrollbar",children:[(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsxs)("div",{onClick:()=>_.current?.click(),className:"relative group cursor-pointer w-full h-48 rounded-2xl bg-vasta-surface-soft border-2 border-dashed border-vasta-border hover:border-vasta-primary/50 transition-all flex flex-col items-center justify-center overflow-hidden",children:[y?(0,s.jsx)("img",{src:y,alt:"Product",className:"w-full h-full object-cover"}):(0,s.jsxs)("div",{className:"flex flex-col items-center gap-2 text-vasta-muted group-hover:text-vasta-primary transition-colors",children:[(0,s.jsx)("div",{className:"p-3 bg-vasta-bg rounded-full shadow-sm",children:(0,s.jsx)(m.A,{size:24})}),(0,s.jsx)("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Adicionar Capa"})]}),(0,s.jsx)("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center text-white font-bold backdrop-blur-[1px]",children:A?(0,s.jsx)(l.A,{className:"animate-spin"}):(0,s.jsx)(h,{size:20})}),(0,s.jsx)("input",{type:"file",ref:_,className:"hidden",accept:"image/*",onChange:M})]})}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-bold text-vasta-muted uppercase tracking-wider mb-2",children:"Nome do Produto"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(v.A,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-vasta-muted",size:16}),(0,s.jsx)("input",{required:!0,value:i,onChange:e=>d(e.target.value),placeholder:"Ex: E-book de Receitas",className:"w-full rounded-xl bg-vasta-surface-soft border border-vasta-border py-3 pl-10 pr-4 text-sm font-medium text-vasta-text focus:border-vasta-primary focus:ring-1 focus:ring-vasta-primary outline-none transition-all"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-bold text-vasta-muted uppercase tracking-wider mb-2",children:"Pre\xe7o (R$)"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(b.A,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-vasta-muted",size:16}),(0,s.jsx)("input",{type:"number",step:"0.01",min:"0",required:!0,value:g,onChange:e=>j(e.target.value),placeholder:"29.90",className:"w-full rounded-xl bg-vasta-surface-soft border border-vasta-border py-3 pl-10 pr-4 text-sm font-medium text-vasta-text focus:border-vasta-primary focus:ring-1 focus:ring-vasta-primary outline-none transition-all"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-bold text-vasta-muted uppercase tracking-wider mb-2",children:"Descri\xe7\xe3o"}),(0,s.jsx)("textarea",{value:n,onChange:e=>c(e.target.value),placeholder:"Detalhes incr\xedveis sobre seu produto...",rows:4,className:"w-full rounded-xl bg-vasta-surface-soft border border-vasta-border p-4 text-sm font-medium text-vasta-text focus:border-vasta-primary focus:ring-1 focus:ring-vasta-primary outline-none transition-all resize-none"})]})]}),(0,s.jsx)("div",{className:"pt-2",children:(0,s.jsx)("button",{type:"submit",disabled:w||A,className:"w-full flex items-center justify-center gap-2 rounded-xl bg-vasta-primary py-4 text-sm font-bold text-white shadow-lg shadow-vasta-primary/20 hover:bg-vasta-primary-soft hover:scale-[1.02] active:scale-[0.98] transition-all disabled:opacity-50 disabled:scale-100",children:w?(0,s.jsx)(l.A,{className:"animate-spin"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f.A,{size:18})," Salvar Produto"]})})})]})]})}):null}function j(){let{user:e}=(0,x.A)(),a=(0,u.U)(),[t,i]=(0,r.useState)([]),[p,m]=(0,r.useState)(!0),[h,v]=(0,r.useState)(!1),[b,f]=(0,r.useState)(null),j=async()=>{if(!e)return;let{data:t}=await a.from("products").select("*").eq("profile_id",e.id).order("created_at",{ascending:!1});t&&i(t),m(!1)},y=()=>{f(null),v(!0)},N=e=>{f(e),v(!0)};return p?(0,s.jsx)("div",{className:"flex h-64 items-center justify-center",children:(0,s.jsx)(l.A,{className:"animate-spin text-vasta-primary"})}):(0,s.jsxs)("div",{className:"space-y-8 pb-32 animate-in fade-in duration-500",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-vasta-text",children:"Minha Loja"}),(0,s.jsx)("p",{className:"text-sm text-vasta-muted",children:"Gerencie seus produtos digitais e servi\xe7os"})]}),(0,s.jsxs)("button",{onClick:y,className:"flex items-center justify-center gap-2 rounded-2xl bg-vasta-primary px-6 py-3 text-sm font-bold text-white transition-all hover:bg-vasta-primary-soft shadow-lg shadow-vasta-primary/20 hover:scale-105 active:scale-95",children:[(0,s.jsx)(o.A,{size:18})," Novo Produto"]})]}),(0,s.jsxs)("section",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"rounded-[2rem] border border-emerald-500/20 bg-emerald-500/5 p-6 relative overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 p-8 opacity-10",children:(0,s.jsx)(d,{size:100,className:"text-emerald-500"})}),(0,s.jsxs)("div",{className:"relative z-10",children:[(0,s.jsxs)("div",{className:"inline-flex items-center gap-2 rounded-full bg-emerald-500/10 px-3 py-1 text-xs font-bold text-emerald-500 mb-2 border border-emerald-500/20",children:[(0,s.jsxs)("span",{className:"relative flex h-2 w-2",children:[(0,s.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"}),(0,s.jsx)("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-emerald-500"})]}),"Checkout Ativo"]}),(0,s.jsx)("h3",{className:"text-lg font-bold text-vasta-text",children:"Voc\xea est\xe1 pronto para vender!"}),(0,s.jsx)("p",{className:"text-sm text-vasta-muted mt-1 max-w-md",children:"Seus produtos aparecer\xe3o automaticamente no seu perfil p\xfablico e os pagamentos cair\xe3o direto na sua conta Stripe conectada."})]})]}),0===t.length?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center rounded-[2.5rem] border border-dashed border-vasta-border py-24 text-center bg-vasta-surface/30",children:[(0,s.jsx)("div",{className:"h-20 w-20 rounded-3xl bg-vasta-surface-soft flex items-center justify-center mb-6 text-vasta-muted shadow-sm",children:(0,s.jsx)(d,{size:40})}),(0,s.jsx)("h3",{className:"text-xl font-bold text-vasta-text mb-2",children:"Sua loja est\xe1 vazia"}),(0,s.jsx)("p",{className:"text-vasta-muted max-w-xs mx-auto mb-8 leading-relaxed",children:"Comece a monetizar sua audi\xeancia vendendo e-books, consultorias ou presets."}),(0,s.jsx)("button",{onClick:y,className:"text-sm font-bold text-vasta-primary hover:underline underline-offset-4",children:"Criar primeiro produto"})]}):(0,s.jsx)("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3",children:t.map(e=>(0,s.jsxs)("div",{className:"group flex flex-col rounded-[2rem] border border-vasta-border bg-vasta-surface overflow-hidden hover:shadow-xl hover:shadow-black/5 hover:border-vasta-primary/30 transition-all duration-300",children:[(0,s.jsxs)("div",{className:"h-48 bg-vasta-surface-soft relative overflow-hidden",children:[e.image_url?(0,s.jsx)("img",{src:e.image_url,alt:e.title,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}):(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-vasta-bg/50",children:(0,s.jsx)(d,{className:"text-vasta-muted/30",size:40})}),(0,s.jsx)("div",{className:"absolute top-4 right-4",children:(0,s.jsx)("span",{className:"px-3 py-1 rounded-full bg-black/60 backdrop-blur-md text-[10px] font-bold text-white uppercase tracking-wider border border-white/10",children:e.type})})]}),(0,s.jsxs)("div",{className:"p-5 flex-1 flex flex-col",children:[(0,s.jsx)("div",{className:"flex justify-between items-start mb-2",children:(0,s.jsx)("h3",{className:"text-base font-bold text-vasta-text leading-tight line-clamp-2",children:e.title})}),(0,s.jsx)("p",{className:"text-sm font-bold text-vasta-primary mb-4",children:e.price>0?`R$ ${e.price.toFixed(2).replace(".",",")}`:"Gr\xe1tis"}),(0,s.jsxs)("div",{className:"mt-auto flex gap-2",children:[(0,s.jsxs)("button",{onClick:()=>N(e),className:"flex-1 flex items-center justify-center gap-2 rounded-xl bg-vasta-surface-soft border border-vasta-border py-2.5 text-xs font-bold text-vasta-text hover:bg-vasta-border/50 transition-colors",children:[(0,s.jsx)(n,{size:14})," Editar"]}),(0,s.jsx)("button",{className:"flex items-center justify-center p-2.5 rounded-xl bg-vasta-surface-soft border border-vasta-border text-vasta-muted hover:text-vasta-text hover:bg-vasta-border/50 transition-colors",children:(0,s.jsx)(c,{size:16})})]})]})]},e.id))})]}),(0,s.jsx)(g,{isOpen:h,onClose:()=>v(!1),productToEdit:b,onSuccess:j})]})}},1393:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(1680).A)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},8741:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(1680).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},3680:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(1680).A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},2353:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(1680).A)("type",[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]])},3428:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>s});let s=(0,t(6760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Vasta\\\\web\\\\app\\\\dashboard\\\\minha-loja\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Vasta\\web\\app\\dashboard\\minha-loja\\page.tsx","default")}};var a=require("../../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),s=a.X(0,[477,497,737],()=>t(2636));module.exports=s})();