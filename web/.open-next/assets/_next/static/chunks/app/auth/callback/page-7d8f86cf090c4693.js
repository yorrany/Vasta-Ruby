(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6769],{7536:(e,s,r)=>{Promise.resolve().then(r.bind(r,1991))},1991:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>i,dynamic:()=>c});var a=r(5155),t=r(2115),n=r(6046),o=r(747);let c="force-dynamic";function u(){let e=(0,n.useRouter)(),s=(0,n.useSearchParams)(),[r,c]=(0,t.useState)(null),u=(0,t.useRef)(!1);return((0,t.useEffect)(()=>{(async()=>{var r;if(u.current)return;u.current=!0;let a=s.get("code"),t=null!==(r=s.get("next"))&&void 0!==r?r:"/dashboard",n=s.get("error_description");if(n){c(n);return}if(a){let s=(0,o.U)(),{error:r}=await s.auth.exchangeCodeForSession(a);r?(console.error("Auth error:",r),c("N\xe3o foi poss\xedvel validar seu acesso. Isso pode acontecer se o link expirou ou se houve uma falha na comunica\xe7\xe3o.")):e.push(t)}else e.push("/dashboard")})()},[e,s]),r)?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-red-600",children:"Erro de Autentica\xe7\xe3o"}),(0,a.jsx)("p",{className:"mt-2 text-gray-600",children:r}),(0,a.jsx)("button",{onClick:()=>e.push("/login"),className:"mt-4 px-4 py-2 bg-vasta-primary text-white rounded-md hover:bg-vasta-primary/90",children:"Voltar para Login"})]})}):(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-xl font-semibold",children:"Autenticando..."}),(0,a.jsx)("p",{className:"mt-2 text-gray-500",children:"Por favor, aguarde enquanto validamos seu acesso."})]})})}function i(){return(0,a.jsx)(t.Suspense,{fallback:(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("h1",{className:"text-xl font-semibold",children:"Carregando..."})})}),children:(0,a.jsx)(u,{})})}},747:(e,s,r)=>{"use strict";let a;r.d(s,{U:()=>i});var t=r(5352),n=r(2818);let o=n.env.NEXT_PUBLIC_SUPABASE_URL,c=n.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,u=()=>{if(!o||!c)throw Error("[Security] Missing Supabase environment variables. Ensure NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY are set.")};function i(){return a||(u(),a=(0,t.UU)(o||"https://placeholder.supabase.co",c||"placeholder-key",{auth:{persistSession:!0,storageKey:"vasta-auth-token",storage:window.localStorage,detectSessionInUrl:!1,flowType:"pkce",autoRefreshToken:!0}}))}},6046:(e,s,r)=>{"use strict";var a=r(6658);r.o(a,"useParams")&&r.d(s,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(s,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(s,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(s,{useSearchParams:function(){return a.useSearchParams}})}},e=>{var s=s=>e(e.s=s);e.O(0,[5352,8441,1517,7358],()=>s(7536)),_N_E=e.O()}]);