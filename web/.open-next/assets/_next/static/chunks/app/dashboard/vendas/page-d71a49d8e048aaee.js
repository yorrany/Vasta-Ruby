(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5781],{6883:(e,t,a)=>{Promise.resolve().then(a.bind(a,8164))},8164:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m});var s=a(5155),r=a(2115),l=a(4505),n=a(4807),i=a(5870),d=a(6878);let o=(0,a(7401).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);var c=a(853),u=a(747),x=a(4912);function m(){let{user:e}=(0,x.A)(),t=(0,u.U)(),[a,m]=(0,r.useState)([]),[h,p]=(0,r.useState)(!0),[v,f]=(0,r.useState)({totalRevenue:0,totalSales:0,avgTicket:0,uniqueCustomers:0});return((0,r.useEffect)(()=>{(async function(){if(!e)return;let{data:a,error:s}=await t.from("orders").select("\n                *,\n                products (\n                    title\n                )\n            ").eq("profile_id",e.id).order("created_at",{ascending:!1});if(s&&console.error(s),a){m(a);let e=a.reduce((e,t)=>e+(t.amount||0),0),t=a.length;f({totalRevenue:e,totalSales:t,avgTicket:t>0?e/t:0,uniqueCustomers:new Set(a.map(e=>e.buyer_email)).size})}p(!1)})()},[e]),h)?(0,s.jsx)("div",{className:"flex h-64 items-center justify-center",children:(0,s.jsx)(l.A,{className:"animate-spin text-vasta-primary"})}):(0,s.jsxs)("div",{className:"space-y-8 animate-in fade-in duration-500",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-vasta-text",children:"Vendas"}),(0,s.jsxs)("div",{className:"rounded-full bg-vasta-surface px-4 py-2 text-xs font-bold text-emerald-400 border border-emerald-500/20 shadow-sm flex items-center gap-2",children:[(0,s.jsx)("div",{className:"h-2 w-2 rounded-full bg-emerald-500 animate-pulse"}),"Stripe Conectado"]})]}),(0,s.jsx)("section",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-4",children:[{label:"Receita Total",value:"R$ ".concat(v.totalRevenue.toFixed(2).replace(".",",")),icon:n.A,color:"text-emerald-400"},{label:"Vendas",value:v.totalSales,icon:i.A,color:"text-blue-400"},{label:"Ticket M\xe9dio",value:"R$ ".concat(v.avgTicket.toFixed(2).replace(".",",")),icon:d.A,color:"text-amber-400"},{label:"Clientes",value:v.uniqueCustomers,icon:o,color:"text-purple-400"}].map((e,t)=>(0,s.jsxs)("div",{className:"rounded-[2rem] border border-vasta-border bg-vasta-surface p-6 flex flex-col justify-between hover:shadow-lg transition-shadow",children:[(0,s.jsx)("div",{className:"p-3 rounded-2xl bg-vasta-surface-soft w-fit mb-4 ".concat(e.color),children:(0,s.jsx)(e.icon,{size:20})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs font-bold text-vasta-muted uppercase tracking-wider",children:e.label}),(0,s.jsx)("p",{className:"text-2xl font-black text-vasta-text mt-1",children:e.value})]})]},t))}),(0,s.jsxs)("section",{className:"rounded-[2.5rem] border border-vasta-border bg-vasta-surface p-6 overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-8 px-2",children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-vasta-text",children:"Hist\xf3rico de Transa\xe7\xf5es"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(c.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-vasta-muted",size:14}),(0,s.jsx)("input",{placeholder:"Buscar pedido...",className:"rounded-xl bg-vasta-surface-soft pl-9 pr-4 py-2 text-xs font-medium text-vasta-text placeholder:text-vasta-muted focus:outline-none focus:ring-1 focus:ring-vasta-primary border border-transparent focus:border-vasta-primary transition-all"})]})]}),0===a.length?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[(0,s.jsx)("div",{className:"h-16 w-16 rounded-full bg-vasta-surface-soft flex items-center justify-center mb-4 text-vasta-muted",children:(0,s.jsx)(i.A,{size:24})}),(0,s.jsx)("p",{className:"text-vasta-text font-bold",children:"Nenhuma venda ainda."}),(0,s.jsx)("p",{className:"text-sm text-vasta-muted mt-1",children:"Divulgue seus produtos para come\xe7ar a vender!"})]}):(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full text-left",children:[(0,s.jsx)("thead",{className:"border-b border-vasta-border text-vasta-muted text-xs uppercase tracking-wider font-bold",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"pb-4 pl-4",children:"Produto"}),(0,s.jsx)("th",{className:"pb-4",children:"Cliente"}),(0,s.jsx)("th",{className:"pb-4",children:"Data"}),(0,s.jsx)("th",{className:"pb-4",children:"Valor"}),(0,s.jsx)("th",{className:"pb-4 pr-4 text-right",children:"Status"})]})}),(0,s.jsx)("tbody",{className:"text-sm",children:a.map(e=>{var t;return(0,s.jsxs)("tr",{className:"group border-b border-vasta-border/50 last:border-0 hover:bg-vasta-surface-soft/50 transition-colors",children:[(0,s.jsx)("td",{className:"py-4 pl-4 font-bold text-vasta-text",children:(null===(t=e.products)||void 0===t?void 0:t.title)||"Produto Removido"}),(0,s.jsx)("td",{className:"py-4 text-vasta-muted font-medium",children:e.buyer_email}),(0,s.jsx)("td",{className:"py-4 text-vasta-muted text-xs",children:new Date(e.created_at).toLocaleDateString("pt-BR")}),(0,s.jsxs)("td",{className:"py-4 text-vasta-text font-bold",children:["R$ ",e.amount.toFixed(2).replace(".",",")]}),(0,s.jsx)("td",{className:"py-4 pr-4 text-right",children:(0,s.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-[10px] font-black uppercase tracking-wide ".concat("paid"===e.status?"bg-emerald-500/10 text-emerald-500":"pending"===e.status?"bg-amber-500/10 text-amber-500":"bg-red-500/10 text-red-500"),children:"paid"===e.status?"Aprovado":"pending"===e.status?"Pendente":"Cancelado"})})]},e.id)})})]})})]})]})}},4912:(e,t,a)=>{"use strict";a.d(t,{A:()=>d,AuthProvider:()=>i});var s=a(5155),r=a(2115),l=a(747);let n=(0,r.createContext)(void 0);function i(e){let{children:t}=e,[a,i]=(0,r.useState)(!1),[d,o]=(0,r.useState)("signup"),[c,u]=(0,r.useState)(void 0),[x,m]=(0,r.useState)(null),[h,p]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{let e=(0,l.U)();e.auth.getUser().then(e=>{let{data:{user:t}}=e;m(t),p(!1)});let{data:{subscription:t}}=e.auth.onAuthStateChange((e,t)=>{var a;m(null!==(a=null==t?void 0:t.user)&&void 0!==a?a:null),p(!1)});return()=>{t.unsubscribe()}},[]),(0,s.jsx)(n.Provider,{value:{openAuthModal:(e,t)=>{o(e),u(t),i(!0)},closeAuthModal:()=>i(!1),isOpen:a,mode:d,contextualCTA:c,user:x,loading:h},children:t})}function d(){let e=(0,r.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},747:(e,t,a)=>{"use strict";let s;a.d(t,{U:()=>o});var r=a(5352),l=a(2818);let n=l.env.NEXT_PUBLIC_SUPABASE_URL,i=l.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,d=()=>{if(!n||!i)throw Error("[Security] Missing Supabase environment variables. Ensure NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY are set.")};function o(){return s||(d(),s=(0,r.UU)(n||"https://placeholder.supabase.co",i||"placeholder-key",{auth:{persistSession:!0,storageKey:"vasta-auth-token",storage:window.localStorage,detectSessionInUrl:!1,flowType:"pkce",autoRefreshToken:!0}}))}},7401:(e,t,a)=>{"use strict";a.d(t,{A:()=>u});var s=a(2115);let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()),n=e=>{let t=l(e);return t.charAt(0).toUpperCase()+t.slice(1)},i=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()},d=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=(0,s.forwardRef)((e,t)=>{let{color:a="currentColor",size:r=24,strokeWidth:l=2,absoluteStrokeWidth:n,className:c="",children:u,iconNode:x,...m}=e;return(0,s.createElement)("svg",{ref:t,...o,width:r,height:r,stroke:a,strokeWidth:n?24*Number(l)/Number(r):l,className:i("lucide",c),...!u&&!d(m)&&{"aria-hidden":"true"},...m},[...x.map(e=>{let[t,a]=e;return(0,s.createElement)(t,a)}),...Array.isArray(u)?u:[u]])}),u=(e,t)=>{let a=(0,s.forwardRef)((a,l)=>{let{className:d,...o}=a;return(0,s.createElement)(c,{ref:l,iconNode:t,className:i("lucide-".concat(r(n(e))),"lucide-".concat(e),d),...o})});return a.displayName=n(e),a}},4807:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(7401).A)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},4505:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(7401).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},853:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(7401).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},5870:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(7401).A)("shopping-bag",[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]])},6878:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(7401).A)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[5352,8441,1517,7358],()=>t(6883)),_N_E=e.O()}]);