(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5105],{8722:(e,t,a)=>{Promise.resolve().then(a.bind(a,5157))},5157:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>b});var s=a(5155),r=a(2115),l=a(7401);let i=(0,l.A)("wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);var d=a(6878),o=a(9136),n=a(3473);let c=(0,l.A)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var x=a(5870),h=a(8251),u=a(6233);let m=(0,l.A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var v=a(747),p=a(4912);function b(){let{user:e}=(0,p.A)(),t=(0,v.U)(),[a,l]=(0,r.useState)(!0),[b,f]=(0,r.useState)([]),[g,j]=(0,r.useState)([]),[y,N]=(0,r.useState)(0),[w,k]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{(async function(){if(!e)return;let a=new Date;a.setDate(a.getDate()-30);let{data:s}=await t.from("orders").select("*, products(title)").eq("profile_id",e.id).gte("created_at",a.toISOString()).order("created_at",{ascending:!1});if(s){f(s.slice(0,4));let e=Array.from({length:7},(e,t)=>{let a=new Date;return a.setDate(a.getDate()-(6-t)),a}),t=0,a=e.map(e=>{let a=e.toLocaleDateString("pt-BR",{weekday:"narrow"}).toUpperCase(),r=e.toISOString().split("T")[0],l=s.filter(e=>e.created_at.startsWith(r)&&"paid"===e.status).reduce((e,t)=>e+(t.amount||0),0);return t+=l,{day:a,val:l,active:e.getDate()===new Date().getDate(),price:"R$ ".concat(l.toFixed(0))}});N(t);let r=Math.max(...a.map(e=>e.val))||1;j(a.map(e=>({...e,heightPct:e.val/r*100})))}l(!1)})()},[e]),(0,s.jsxs)("div",{className:"space-y-6 animate-in fade-in duration-500",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"xl:col-span-2 rounded-[2rem] bg-vasta-surface p-6 sm:p-8 shadow-sm border border-vasta-border relative overflow-hidden flex flex-col justify-between min-h-[320px]",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-8 relative z-10",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-vasta-muted mb-1",children:[(0,s.jsx)(i,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Faturamento (7 dias)"})]}),(0,s.jsxs)("h2",{className:"text-3xl sm:text-4xl font-black text-vasta-text tracking-tight",children:["R$ ",a?"...":y.toFixed(2).replace(".",",")]})]}),(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsxs)("div",{className:"px-3 py-1.5 rounded-lg bg-emerald-500/10 text-emerald-500 text-xs font-bold flex items-center gap-1.5 border border-emerald-500/20",children:[(0,s.jsx)(d.A,{size:14}),(0,s.jsx)("span",{children:"+0% esta semana"})]})})]}),(0,s.jsx)("div",{className:"flex items-end justify-between h-40 sm:h-48 gap-3 sm:gap-6 relative z-10",children:a?(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center text-vasta-muted text-xs animate-pulse",children:"Carregando dados..."}):g.length>0?g.map((e,t)=>(0,s.jsxs)("div",{className:"flex flex-col items-center gap-3 flex-1 group/bar cursor-default",children:[(0,s.jsx)("div",{className:"opacity-0 group-hover/bar:opacity-100 transition-opacity absolute -top-8 bg-vasta-text text-vasta-bg text-[10px] font-bold px-2 py-1 rounded-lg pointer-events-none whitespace-nowrap z-20",children:e.price}),(0,s.jsx)("div",{className:"w-full max-w-[40px] rounded-t-xl sm:rounded-2xl transition-all duration-700 ease-out relative overflow-hidden ".concat(e.active?"bg-vasta-text shadow-lg shadow-vasta-text/20":"bg-vasta-surface-soft hover:bg-vasta-primary/60"),style:{height:0===e.val?"8px":"".concat(Math.max(e.heightPct,10),"%")},children:e.active&&(0,s.jsx)("div",{className:"absolute inset-0 bg-white/20 blur-md animate-pulse"})}),(0,s.jsx)("span",{className:"text-[10px] sm:text-xs font-bold ".concat(e.active?"text-vasta-text":"text-vasta-muted"),children:e.day})]},t)):(0,s.jsxs)("div",{className:"w-full text-center text-xs text-vasta-muted flex flex-col items-center justify-center h-full border-2 border-dashed border-vasta-border rounded-xl",children:[(0,s.jsx)(o.A,{className:"mb-2 opacity-50"}),"Sem dados de vendas"]})}),(0,s.jsx)("div",{className:"absolute top-0 right-0 p-12 opacity-5 pointer-events-none",children:(0,s.jsx)(i,{className:"w-64 h-64 rotate-[-15deg] translate-x-12 -translate-y-12"})})]}),(0,s.jsxs)("div",{className:"space-y-6 flex flex-col",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("a",{href:"/dashboard/minha-loja",className:"bg-vasta-surface p-5 rounded-[1.5rem] border border-vasta-border hover:border-vasta-primary/50 hover:shadow-lg hover:shadow-vasta-primary/5 transition-all group flex flex-col justify-between aspect-square",children:[(0,s.jsx)("div",{className:"h-10 w-10 rounded-full bg-vasta-surface-soft flex items-center justify-center group-hover:bg-vasta-primary/10 group-hover:text-vasta-primary transition-colors",children:(0,s.jsx)(n.A,{size:20})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold text-sm text-vasta-text leading-tight",children:"Novo Produto"}),(0,s.jsx)("p",{className:"text-[10px] text-vasta-muted mt-1 group-hover:text-vasta-primary/80",children:"Adicionar item"})]})]}),(0,s.jsxs)("button",{onClick:()=>{k(!0),setTimeout(()=>k(!1),2e3)},className:"bg-vasta-surface p-5 rounded-[1.5rem] border border-vasta-border hover:border-vasta-accent/50 hover:shadow-lg hover:shadow-vasta-accent/5 transition-all group flex flex-col justify-between aspect-square relative overflow-hidden",children:[(0,s.jsx)("div",{className:"h-10 w-10 rounded-full bg-vasta-surface-soft flex items-center justify-center group-hover:bg-vasta-accent/10 group-hover:text-vasta-accent transition-colors",children:(0,s.jsx)(c,{size:18})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold text-sm text-vasta-text leading-tight",children:w?"Copiado!":"Copiar Link"}),(0,s.jsx)("p",{className:"text-[10px] text-vasta-muted mt-1 group-hover:text-vasta-accent/80",children:"Compartilhar perfil"})]}),w&&(0,s.jsx)("div",{className:"absolute inset-0 bg-emerald-500/10 animate-pulse"})]})]}),(0,s.jsxs)("div",{className:"flex-1 relative overflow-hidden rounded-[2rem] bg-gradient-to-br from-stone-900 via-stone-800 to-black p-6 text-white shadow-xl flex flex-col justify-center gap-4 group",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-30 mix-blend-overlay"}),(0,s.jsx)("div",{className:"absolute right-0 top-0 w-32 h-32 bg-vasta-primary/40 blur-3xl rounded-full translate-x-1/2 -translate-y-1/2 group-hover:bg-vasta-primary/60 transition-colors"}),(0,s.jsxs)("div",{className:"relative z-10",children:[(0,s.jsx)("div",{className:"inline-block px-2 py-0.5 rounded text-[10px] font-bold bg-white/20 border border-white/10 mb-2 backdrop-blur-sm",children:"PRO"}),(0,s.jsx)("h3",{className:"text-xl font-bold leading-tight",children:"Desbloqueie todo o poder."}),(0,s.jsx)("p",{className:"text-xs text-gray-400 mt-2 line-clamp-2",children:"Taxas menores, dom\xednio personalizado e temas exclusivos."})]}),(0,s.jsx)("a",{href:"/dashboard/billing",className:"relative z-10 w-fit px-5 py-2.5 rounded-xl bg-white text-black text-xs font-bold hover:scale-105 transition-transform shadow-lg shadow-white/10",children:"Ver Planos"})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"bg-vasta-surface rounded-[2rem] border border-vasta-border p-6 sm:p-8",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("h3",{className:"font-bold text-lg text-vasta-text",children:"Vendas Recentes"}),(0,s.jsx)("a",{href:"/dashboard/vendas",className:"text-xs font-bold text-vasta-primary hover:text-vasta-primary/80 bg-vasta-primary/5 px-3 py-1.5 rounded-full transition-colors",children:"Ver todas"})]}),(0,s.jsx)("div",{className:"space-y-2",children:a?(0,s.jsx)("div",{className:"h-24 rounded-2xl bg-vasta-surface-soft animate-pulse"}):b.length>0?b.map((e,t)=>{var a;return(0,s.jsxs)("div",{className:"group flex items-center justify-between p-3 rounded-2xl hover:bg-vasta-surface-soft transition-colors border border-transparent hover:border-vasta-border/50",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 min-w-0",children:[(0,s.jsx)("div",{className:"h-10 w-10 rounded-xl flex items-center justify-center shrink-0 ".concat("paid"===e.status?"bg-emerald-500/10 text-emerald-500":"bg-amber-500/10 text-amber-500"),children:(0,s.jsx)(x.A,{size:18})}),(0,s.jsxs)("div",{className:"min-w-0",children:[(0,s.jsx)("p",{className:"font-bold text-sm text-vasta-text truncate pr-2",children:(null===(a=e.products)||void 0===a?void 0:a.title)||"Produto Indispon\xedvel"}),(0,s.jsxs)("p",{className:"text-[10px] text-vasta-muted",children:[new Date(e.created_at).toLocaleDateString("pt-BR")," â€¢ ",e.buyer_email?e.buyer_email.split("@")[0]:"An\xf4nimo"]})]})]}),(0,s.jsxs)("div",{className:"text-right shrink-0",children:[(0,s.jsxs)("p",{className:"font-bold text-sm text-vasta-text",children:["R$ ",e.amount.toFixed(2).replace(".",",")]}),(0,s.jsx)("p",{className:"text-[10px] font-bold uppercase ".concat("paid"===e.status?"text-emerald-500":"text-amber-500"),children:"paid"===e.status?"Pago":e.status})]})]},t)}):(0,s.jsxs)("div",{className:"py-8 text-center bg-vasta-surface-soft/30 rounded-2xl border border-dashed border-vasta-border",children:[(0,s.jsx)(x.A,{className:"mx-auto h-8 w-8 text-vasta-muted/50 mb-2"}),(0,s.jsx)("p",{className:"text-sm font-bold text-vasta-text",children:"Nenhuma venda"}),(0,s.jsx)("p",{className:"text-[10px] text-vasta-muted",children:"Compartilhe seu link para come\xe7ar!"})]})})]}),(0,s.jsxs)("div",{className:"bg-vasta-surface rounded-[2rem] border border-vasta-border p-6 sm:p-8 flex flex-col",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("h3",{className:"font-bold text-lg text-vasta-text",children:"Funil de Convers\xe3o"}),(0,s.jsx)("span",{className:"bg-vasta-surface-soft text-[10px] font-bold px-2 py-0.5 rounded text-vasta-muted border border-vasta-border",children:"07 dias"})]}),(0,s.jsx)("div",{className:"h-2 w-2 rounded-full bg-orange-500 animate-pulse",title:"Tracking Ativo"})]}),(0,s.jsxs)("div",{className:"flex-1 grid grid-cols-3 gap-2 relative",children:[(0,s.jsx)("div",{className:"absolute top-1/2 left-0 right-0 h-1 bg-vasta-surface-soft -translate-y-1/2 rounded-full z-0"}),[{label:"Visitas",val:"--",icon:i,color:"bg-blue-500"},{label:"Cliques",val:"--",icon:h.A,color:"bg-purple-500"},{label:"Vendas",val:b.length,icon:u.A,color:"bg-emerald-500"}].map((e,t)=>(0,s.jsxs)("div",{className:"relative z-10 bg-vasta-surface border border-vasta-border hover:border-vasta-primary/50 transition-colors p-4 rounded-2xl text-center flex flex-col items-center justify-center gap-2 shadow-sm",children:[(0,s.jsx)("p",{className:"text-[10px] font-bold uppercase tracking-wider text-vasta-muted",children:e.label}),(0,s.jsx)("p",{className:"text-2xl font-black text-vasta-text",children:e.val}),(0,s.jsx)("div",{className:"h-1 w-8 rounded-full ".concat(e.color," opacity-50")})]},t))]}),(0,s.jsxs)("div",{className:"mt-8 bg-vasta-surface-soft/50 rounded-xl p-3 flex items-start gap-3 border border-vasta-border/50",children:[(0,s.jsx)("div",{className:"p-1.5 bg-orange-500/10 text-orange-500 rounded-lg shrink-0",children:(0,s.jsx)(m,{size:14})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs font-bold text-vasta-text",children:"Analytics em calibra\xe7\xe3o"}),(0,s.jsx)("p",{className:"text-[10px] text-vasta-muted leading-tight mt-0.5",children:"Estamos coletando dados iniciais do seu perfil. M\xe9tricas de visitas e cliques aparecer\xe3o em breve."})]})]})]})]})]})}},4912:(e,t,a)=>{"use strict";a.d(t,{A:()=>o,AuthProvider:()=>d});var s=a(5155),r=a(2115),l=a(747);let i=(0,r.createContext)(void 0);function d(e){let{children:t}=e,[a,d]=(0,r.useState)(!1),[o,n]=(0,r.useState)("signup"),[c,x]=(0,r.useState)(void 0),[h,u]=(0,r.useState)(null),[m,v]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{let e=(0,l.U)();e.auth.getUser().then(e=>{let{data:{user:t}}=e;u(t),v(!1)});let{data:{subscription:t}}=e.auth.onAuthStateChange((e,t)=>{var a;u(null!==(a=null==t?void 0:t.user)&&void 0!==a?a:null),v(!1)});return()=>{t.unsubscribe()}},[]),(0,s.jsx)(i.Provider,{value:{openAuthModal:(e,t)=>{n(e),x(t),d(!0)},closeAuthModal:()=>d(!1),isOpen:a,mode:o,contextualCTA:c,user:h,loading:m},children:t})}function o(){let e=(0,r.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},747:(e,t,a)=>{"use strict";let s;a.d(t,{U:()=>n});var r=a(5352),l=a(2818);let i=l.env.NEXT_PUBLIC_SUPABASE_URL,d=l.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,o=()=>{if(!i||!d)throw Error("[Security] Missing Supabase environment variables. Ensure NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY are set.")};function n(){return s||(o(),s=(0,r.UU)(i||"https://placeholder.supabase.co",d||"placeholder-key",{auth:{persistSession:!0,storageKey:"vasta-auth-token",storage:window.localStorage,detectSessionInUrl:!1,flowType:"pkce",autoRefreshToken:!0}}))}},7401:(e,t,a)=>{"use strict";a.d(t,{A:()=>x});var s=a(2115);let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()),i=e=>{let t=l(e);return t.charAt(0).toUpperCase()+t.slice(1)},d=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()},o=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=(0,s.forwardRef)((e,t)=>{let{color:a="currentColor",size:r=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:c="",children:x,iconNode:h,...u}=e;return(0,s.createElement)("svg",{ref:t,...n,width:r,height:r,stroke:a,strokeWidth:i?24*Number(l)/Number(r):l,className:d("lucide",c),...!x&&!o(u)&&{"aria-hidden":"true"},...u},[...h.map(e=>{let[t,a]=e;return(0,s.createElement)(t,a)}),...Array.isArray(x)?x:[x]])}),x=(e,t)=>{let a=(0,s.forwardRef)((a,l)=>{let{className:o,...n}=a;return(0,s.createElement)(c,{ref:l,iconNode:t,className:d("lucide-".concat(r(i(e))),"lucide-".concat(e),o),...n})});return a.displayName=i(e),a}},8251:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(7401).A)("arrow-up-right",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]])},9136:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(7401).A)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},6233:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(7401).A)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},3473:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(7401).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},5870:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(7401).A)("shopping-bag",[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]])},6878:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(7401).A)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[5352,8441,1517,7358],()=>t(8722)),_N_E=e.O()}]);